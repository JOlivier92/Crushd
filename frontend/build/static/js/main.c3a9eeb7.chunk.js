(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{41:function(e,t,n){e.exports=n(91)},46:function(e,t,n){},50:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},51:function(e,t,n){},91:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(36),l=n.n(o),i=(n(46),n(16)),c=n.n(i),s=n(8),u=n(9),m=n(11),d=n(10),p=n(12),h=(n(50),n(51),n(3)),f=n(97),v=n(17),b=n.n(v),E=(window.$,function(e){e?b.a.defaults.headers.common.Authorization=e:delete b.a.defaults.headers.common.Authorization}),g=function(e){return{type:"RECEIVE_CURRENT_USER",payload:e}},O=function(){return function(e){localStorage.removeItem("jwtToken"),E(!1),e(g({}))}},w=function(e){var t=e.currentUser,n=e.logout,a=e.openModal,o=e.closeModal;return t?(o(),r.a.createElement("hgroup",{className:"header-group"},r.a.createElement("h2",{className:"header-name"},"Hi, ",t.name,"!"),r.a.createElement("button",{className:"header-button",onClick:n},"Log Out"))):(a({modal:"ShowSignup"}),r.a.createElement("div",null))},y=Object(h.connect)(function(e){return{currentUser:e.session}},function(e){return{logout:function(){return e(O())},openModal:function(t){return e({type:"OPEN_MODAL",modal:t.modal})},closeModal:function(){return e({type:"CLOSE_MODAL"})}}})(w),k=n(92),j=n(18),R=n(13),S=n(96),C=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={username:"",email:"",birthdate:"",phone_number:"",password:"",confirmPassword:"",gender:"",sexual_preference:"",zipcode:""},n.handleSubmit=n.handleSubmit.bind(Object(R.a)(Object(R.a)(n))),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"update",value:function(e){var t=this;return function(n){return t.setState(Object(j.a)({},e,n.currentTarget.value))}}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=Object.assign({},this.state);this.props.history.push("/home"),this.props.processForm(t)}},{key:"renderErrors",value:function(){return r.a.createElement("ul",null,this.props.errors.map(function(e,t){return r.a.createElement("li",{key:"error-".concat(t)},e)}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"login-form-container"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"login-form-box"},"Welcome to Crush'd!",r.a.createElement("br",null),"Please ",this.props.formType," or ",this.props.navLink,this.renderErrors(),r.a.createElement("div",{className:"login-form"},r.a.createElement("label",null,"Email:",r.a.createElement("input",{type:"text",value:this.state.email,onChange:this.update("email"),className:"login-input"})),r.a.createElement("br",null),r.a.createElement("label",null,"Username:",r.a.createElement("input",{type:"text",value:this.state.username,onChange:this.update("username"),className:"login-input"})),r.a.createElement("br",null),r.a.createElement("label",null,"Phone Number:",r.a.createElement("input",{type:"text",value:this.state.phone_number,onChange:this.update("phone_number"),className:"login-input"})),r.a.createElement("br",null),r.a.createElement("label",null,"Birthdate:",r.a.createElement("input",{type:"date",value:this.state.birthdate,onChange:this.update("birthdate"),className:"login-input"})),r.a.createElement("br",null),r.a.createElement("label",null,"Zipcode:",r.a.createElement("input",{type:"text",value:this.state.zipcode,onChange:this.update("zipcode"),className:"login-input"})),r.a.createElement("br",null),r.a.createElement("label",null,"Gender:",r.a.createElement("br",null),r.a.createElement("input",{type:"radio",name:"gender",value:"M",placeholder:"M",onClick:this.update("gender")}),r.a.createElement("label",{htmlFor:"M"}," Male"),r.a.createElement("br",null),r.a.createElement("input",{type:"radio",name:"gender",value:"F",onClick:this.update("gender")}),r.a.createElement("label",{htmlFor:"F"}," Female"),r.a.createElement("br",null),r.a.createElement("input",{type:"radio",name:"gender",value:"O",onClick:this.update("gender")}),r.a.createElement("label",{htmlFor:"O"}," Other")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"Sexual Preference:",r.a.createElement("br",null),r.a.createElement("input",{type:"radio",name:"sexual_preference",value:"M",onClick:this.update("sexual_preference")}),r.a.createElement("label",{htmlFor:"M"}," Male"),r.a.createElement("br",null),r.a.createElement("input",{type:"radio",name:"sexual_preference",value:"F",onClick:this.update("sexual_preference")}),r.a.createElement("label",{htmlFor:"F"}," Female"),r.a.createElement("br",null),r.a.createElement("input",{type:"radio",name:"sexual_preference",value:"O",onClick:this.update("sexual_preference")}),r.a.createElement("label",{htmlFor:"O"}," Other")),r.a.createElement("br",null),r.a.createElement("label",null,"Password:",r.a.createElement("input",{type:"password",value:this.state.password,onChange:this.update("password"),className:"login-input"})),r.a.createElement("br",null),r.a.createElement("label",null,"Confirm Password:",r.a.createElement("input",{type:"password",value:this.state.confirmPassword,onChange:this.update("confirmPassword"),className:"login-input"})),r.a.createElement("br",null),r.a.createElement("input",{className:"session-submit",type:"submit",value:this.props.formType}))))}}]),t}(r.a.Component),N=Object(S.a)(C),x=Object(h.connect)(function(e){var t=e.errors;return{errors:Object.values(t.session),formType:"signup",navLink:r.a.createElement(k.a,{to:"/login"},"log in instead")}},function(e){return{processForm:function(t){return e((n=t,function(e){b.a.post("/api/users/register",n).then(function(t){var n=t.data.token;localStorage.setItem("jwtToken",n),E(n);var a=c()(n);e(g(a))}).catch(function(t){return e({type:"GET_ERRORS",payload:t.response.data})})}));var n}}})(N),_=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={email:"",password:""},n.handleSubmit=n.handleSubmit.bind(Object(R.a)(Object(R.a)(n))),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"update",value:function(e){var t=this;return function(n){return t.setState(Object(j.a)({},e,n.currentTarget.value))}}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=Object.assign({},this.state);this.props.processForm(t)}},{key:"renderErrors",value:function(){return r.a.createElement("ul",null,this.props.errors.map(function(e,t){return r.a.createElement("li",{key:"error-".concat(t)},e)}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"login-form-container"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"login-form-box"},"Welcome to Crush'd",r.a.createElement("br",null),"Please ",this.props.formType," or ",this.props.navLink,this.renderErrors(),r.a.createElement("div",{className:"login-form"},r.a.createElement("label",null,"Email:",r.a.createElement("input",{type:"text",value:this.state.email,onChange:this.update("email"),className:"login-input"})),r.a.createElement("br",null),r.a.createElement("label",null,"Password:",r.a.createElement("input",{type:"password",value:this.state.password,onChange:this.update("password"),className:"login-input"})),r.a.createElement("br",null),r.a.createElement("input",{className:"session-submit",type:"submit",value:this.props.formType}))))}}]),t}(r.a.Component),L=Object(S.a)(_),T=Object(h.connect)(function(e){var t=e.errors;return{errors:Object.values(t.session),formType:"login",navLink:r.a.createElement(k.a,{to:"/signup"},"signup in instead")}},function(e){return{processForm:function(t){return e((n=t,function(e){b.a.post("/api/users/login",n).then(function(t){var n=t.data.token;localStorage.setItem("jwtToken",n),E(n);var a=c()(n);e(g(a))}).catch(function(t){return e({type:"GET_ERRORS",payload:t.response.data})})}));var n}}})(L),M=n(26),U=n.n(M),P=n(38),F=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={recording:!1,videos:[]},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(P.a)(U.a.mark(function e(){var t,n=this;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({video:!0,audio:!0});case 2:t=e.sent,this.video.src=window.URL.createObjectURL(t),this.video.play(),this.mediaRecorder=new MediaRecorder(t,{mimeType:"video/webm"}),this.chunks=[],this.mediaRecorder.ondataavailable=function(e){e.data&&e.data.size>0&&n.chunks.push(e.data)};case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"startRecording",value:function(e){e.preventDefault(),this.chunks=[],this.mediaRecorder.start(10),this.setState({recording:!0})}},{key:"stopRecording",value:function(e){e.preventDefault(),this.mediaRecorder.stop(),this.setState({recording:!1}),this.saveVideo()}},{key:"saveVideo",value:function(){var e=new Blob(this.chunks,{type:"video/webm"}),t=window.URL.createObjectURL(e),n=this.state.videos.concat([t]);this.setState({videos:n})}},{key:"deleteVideo",value:function(e){var t=this.state.videos.filter(function(t){return t!==e});this.setState({videos:t})}},{key:"render",value:function(){var e=this,t=this.state,n=t.recording,a=t.videos;return r.a.createElement("div",{className:"home-content-section"},r.a.createElement("hgroup",{className:"header-group"},r.a.createElement("h2",{className:"header-name"},"Hi, ",this.props.currentUser.name,"!"),r.a.createElement("button",{className:"header-button",onClick:this.props.logout},"Log Out")),r.a.createElement("div",{className:"camera"},r.a.createElement("video",{style:{width:400},ref:function(t){e.video=t}},"Video stream not available"),r.a.createElement("div",{className:"recording-options-section"},!n&&r.a.createElement("button",{onClick:function(t){return e.startRecording(t)}},"Record"),n&&r.a.createElement("button",{onClick:function(t){return e.stopRecording(t)}},"Stop")),r.a.createElement("div",{className:"recorded-videos-section"},r.a.createElement("h3",null,"Recorded Videos:"),a.map(function(t,n){return r.a.createElement("div",{key:"video_".concat(n)},r.a.createElement("video",{style:{width:200},src:t,autoPlay:!0,loop:!0}),r.a.createElement("div",{className:"video-options-section"},r.a.createElement("button",{onClick:function(){return e.deleteVideo(t)}},"Delete"),r.a.createElement("a",{href:t},"Download")))}))))}}]),t}(r.a.Component),D=Object(h.connect)(function(e){return{currentUser:e.session}},function(e){return{logout:function(){return e(O())}}})(F),A=n(93),W=n(95),z=function(e){return{loggedIn:Boolean(e.session.id)}},I=Object(S.a)(Object(h.connect)(z)(function(e){var t=e.component,n=e.path,a=e.loggedIn,o=e.exact;return r.a.createElement(A.a,{path:n,exact:o,render:function(e){return a?r.a.createElement(W.a,{to:"/home"}):r.a.createElement(t,e)}})})),V=Object(S.a)(Object(h.connect)(z)(function(e){var t=e.component,n=e.path,a=e.loggedIn,o=e.exact;return r.a.createElement(A.a,{path:n,exact:o,render:function(e){return a?r.a.createElement(t,e):r.a.createElement(W.a,{to:"/login"})}})})),B=Object(h.connect)(function(e){return{modal:e.ui.modal}},function(e){return{closeModal:function(){return e({type:"CLOSE_MODAL"})}}})(function(e){if(!e.modal)return null;var t;switch(e.modal.modal){case"ShowSignup":t=r.a.createElement(x,null);break;case"ShowLogin":t=r.a.createElement(T,null);break;default:return null}return r.a.createElement("div",{className:"modal-background"},r.a.createElement("div",{className:"modal-child",onClick:function(e){return e.stopPropagation()}},t))}),G=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(B,null),r.a.createElement(f.a,null,r.a.createElement(V,{exact:!0,path:"/home",component:D}),r.a.createElement(I,{exact:!0,path:"/",component:y}),r.a.createElement(I,{exact:!0,path:"/login",component:T}),r.a.createElement(I,{exact:!0,path:"/signup",component:x})))}}]),t}(a.Component),H=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function J(e){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");H?(!function(e,t){fetch(e).then(function(n){404===n.status||-1===n.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):$(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):$(t,e)})}}function $(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var Z=n(7),q=n(39),K=n(40),Q=n.n(K),X=Object.freeze({id:null}),Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case"RECEIVE_CURRENT_USER":return{id:t.payload.id,name:t.payload.name};default:return e}},ee=Object(Z.combineReducers)({session:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case"GET_ERRORS":return t.payload;case"RECEIVE_CURRENT_USER":return[];default:return e}}}),te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case"OPEN_MODAL":return{modal:t.modal,pin:t.pin};case"CLOSE_MODAL":return null;default:return e}},ne=Object(Z.combineReducers)({modal:te}),ae=Object(Z.combineReducers)({session:Y,errors:ee,ui:ne}),re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(Z.createStore)(ae,e,Object(Z.applyMiddleware)(q.a,Q.a))},oe=n(94),le=function(e){var t=e.store;return r.a.createElement(h.Provider,{store:t},r.a.createElement(oe.a,null,r.a.createElement(G,null)))};document.addEventListener("DOMContentLoaded",function(){var e=re();if(localStorage.jwtToken){E(localStorage.jwtToken);var t=c()(localStorage.jwtToken);e.dispatch(g(t));var n=Date.now()/1e3;t.exp<n&&(e.dispatch(O()),window.location.href="/login")}var a=document.getElementById("root");l.a.render(r.a.createElement(le,{store:e}),a),J()}),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[41,2,1]]]);
//# sourceMappingURL=main.c3a9eeb7.chunk.js.map